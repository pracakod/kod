/* ==========================================================================
   Lista — Motywy (predefiniowane i systemowe)
   Plik: css/themes.css
   Odpowiada za: zestawy kolorów dla motywów, tryb auto, wysoki kontrast,
   akcenty i podglądy motywów.
   ========================================================================== */

/* Motyw automatyczny — podąża za systemem */
body.theme-auto { color-scheme: light; }
@media (prefers-color-scheme: dark) {
  body.theme-auto { color-scheme: dark; }
  body.theme-auto {
    --bg: hsl(222 28% 10%);
    --surface-1: hsl(222 24% 12%);
    --surface-2: hsl(222 22% 14%);
    --surface-3: hsl(222 20% 18%);
    --text: hsl(220 15% 92%);
    --muted: hsl(220 10% 70%);
    --primary: hsl(206 75% 56%);
    --primary-contrast: hsl(220 20% 10%);
    --success: hsl(145 58% 52%);
    --warning: hsl(43 90% 60%);
    --danger: hsl(0 78% 62%);
    --info: hsl(205 70% 62%);
    --border: hsl(220 10% 24%);
    --border-strong: hsl(220 12% 30%);
    --shadow-color: 0 0% 100%;
    --focus: hsl(206 80% 62%);
  }
}

/* Motyw jasny (domyślny) */
body.theme-light {
  color-scheme: light;
  --bg: hsl(0 0% 100%);
  --surface-1: hsl(0 0% 98%);
  --surface-2: hsl(0 0% 96%);
  --surface-3: hsl(0 0% 93%);
  --text: hsl(220 15% 15%);
  --muted: hsl(220 10% 45%);
  --primary: hsl(206 77% 42%);
  --primary-contrast: hsl(0 0% 100%);
  --success: hsl(145 58% 45%);
  --warning: hsl(43 90% 55%);
  --danger: hsl(0 78% 55%);
  --info: hsl(205 70% 50%);
  --border: hsl(0 0% 88%);
  --border-strong: hsl(0 0% 80%);
  --shadow-color: 0 0% 0%;
  --focus: hsl(206 77% 42%);
}

/* Motyw ciemny */
body.theme-dark {
  color-scheme: dark;
  --bg: hsl(222 28% 10%);
  --surface-1: hsl(222 24% 12%);
  --surface-2: hsl(222 22% 14%);
  --surface-3: hsl(222 20% 18%);
  --text: hsl(220 15% 92%);
  --muted: hsl(220 10% 70%);
  --primary: hsl(206 75% 56%);
  --primary-contrast: hsl(220 20% 10%);
  --success: hsl(145 58% 52%);
  --warning: hsl(43 90% 60%);
  --danger: hsl(0 78% 62%);
  --info: hsl(205 70% 62%);
  --border: hsl(220 10% 24%);
  --border-strong: hsl(220 12% 30%);
  --shadow-color: 0 0% 100%;
  --focus: hsl(206 80% 62%);
}

/* Akcenty kolorystyczne (warianty) */
body.theme-blue {
  --primary: hsl(206 82% 46%);
  --focus: hsl(206 82% 52%);
}
body.theme-green {
  --primary: hsl(162 72% 38%);
  --focus: hsl(162 72% 44%);
}
body.theme-amber {
  --primary: hsl(38 92% 52%);
  --focus: hsl(38 92% 56%);
}
body.theme-rose {
  --primary: hsl(343 76% 54%);
  --focus: hsl(343 76% 60%);
}

/* Wysoki kontrast (nakładka — można łączyć z innym motywem) */
body.contrast-high {
  --text: hsl(0 0% 0%);
  --bg: hsl(0 0% 100%);
  --surface-1: hsl(0 0% 100%);
  --surface-2: hsl(0 0% 98%);
  --surface-3: hsl(0 0% 95%);
  --border: hsl(0 0% 60%);
  --border-strong: hsl(0 0% 40%);
  --primary-contrast: hsl(0 0% 100%);
}

/* Dodatkowe tony semantyczne (przydatne w kartach, znacznikach) */
:root {
  --tone-blue-100: hsl(206 100% 97%);
  --tone-blue-200: hsl(206 96% 90%);
  --tone-green-100: hsl(146 100% 96%);
  --tone-green-200: hsl(146 82% 88%);
  --tone-amber-100: hsl(45 100% 96%);
  --tone-amber-200: hsl(45 96% 88%);
  --tone-rose-100: hsl(345 100% 96%);
  --tone-rose-200: hsl(345 96% 88%);
}

/* Kafle podglądu motywów (wyświetlane w sekcji Motywy) */
.theme-card {
  display: grid;
  gap: 8px;
  padding: 12px;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--bg);
  box-shadow: var(--elevation);
  cursor: pointer;
}
.theme-card .preview {
  border-radius: 10px;
  border: 1px solid var(--border);
  overflow: hidden;
  height: 84px;
  display: grid;
  grid-template-rows: 26px 1fr 28px;
}
.theme-card .preview .bar-top { background: var(--surface-1); border-bottom: 1px solid var(--border); }
.theme-card .preview .content { background: var(--surface-2); }
.theme-card .preview .bar-bottom { background: var(--surface-1); border-top: 1px solid var(--border); }
.theme-card .name {
  font-weight: 600;
  font-size: 0.95rem;
}

/* Warianty kafli — wstrzykujemy zmienne lokalne na potrzeby podglądu */
.theme-card.is-light {
  --bg: hsl(0 0% 100%);
  --surface-1: hsl(0 0% 98%);
  --surface-2: hsl(0 0% 96%);
  --border: hsl(0 0% 88%);
}
.theme-card.is-dark {
  --bg: hsl(222 28% 10%);
  --surface-1: hsl(222 24% 12%);
  --surface-2: hsl(222 22% 14%);
  --border: hsl(220 10% 24%);
}
.theme-card.is-blue { --surface-2: color-mix(in oklab, var(--tone-blue-200) 60%, transparent); }
.theme-card.is-green{ --surface-2: color-mix(in oklab, var(--tone-green-200) 60%, transparent); }
.theme-card.is-amber{ --surface-2: color-mix(in oklab, var(--tone-amber-200) 60%, transparent); }
.theme-card.is-rose { --surface-2: color-mix(in oklab, var(--tone-rose-200) 60%, transparent); }

/* Kolory projektów/list (etykiety) — mogą być użyte przez list-manager.js */
:root {
  --list-color-red: hsl(0 78% 55%);
  --list-color-orange: hsl(28 90% 56%);
  --list-color-yellow: hsl(45 90% 55%);
  --list-color-green: hsl(145 58% 45%);
  --list-color-teal: hsl(170 70% 40%);
  --list-color-blue: hsl(206 77% 42%);
  --list-color-indigo: hsl(231 62% 50%);
  --list-color-purple: hsl(268 55% 55%);
  --list-color-pink: hsl(343 76% 54%);
  --list-color-brown: hsl(25 30% 40%);
  --list-color-gray: hsl(220 10% 45%);
}

/* Znacznik koloru listy/projektu */
.color-dot {
  width: 10px; height: 10px;
  border-radius: 50%;
  display: inline-block;
  vertical-align: middle;
  margin-right: 8px;
  box-shadow: 0 0 0 2px var(--bg);
}

/* Akcentowanie elementów wg koloru listy (przykład zastosowania) */
.item[data-color="blue"]   { border-color: color-mix(in oklab, var(--list-color-blue) 40%, var(--border)); }
.item[data-color="green"]  { border-color: color-mix(in oklab, var(--list-color-green) 40%, var(--border)); }
.item[data-color="red"]    { border-color: color-mix(in oklab, var(--list-color-red) 40%, var(--border)); }
.item[data-color="purple"] { border-color: color-mix(in oklab, var(--list-color-purple) 40%, var(--border)); }

/* Drobne dopasowania motywów — elementy nawigacji, FAB, snackbar */
body.theme-dark .bottom-nav { background: hsl(222 24% 12%); border-top-color: var(--border); }
body.theme-dark .fab { box-shadow: 0 10px 20px rgb(0 0 0 / 0.45); }
body.theme-dark .snackbar { background: hsl(0 0% 12%); }

/* Warianty semantyczne przydatne w tagach/kategoriach i wykresach */
.tag-blue   { background: color-mix(in oklab, var(--tone-blue-100) 70%, transparent);   border-color: var(--tone-blue-200); }
.tag-green  { background: color-mix(in oklab, var(--tone-green-100) 70%, transparent);  border-color: var(--tone-green-200); }
.tag-amber  { background: color-mix(in oklab, var(--tone-amber-100) 70%, transparent);  border-color: var(--tone-amber-200); }
.tag-rose   { background: color-mix(in oklab, var(--tone-rose-100) 70%, transparent);   border-color: var(--tone-rose-200); }

/* Przycisk primary w ciemnym motywie — delikatne rozjaśnienie przy hover */
body.theme-dark .btn-primary:hover { filter: brightness(1.06); }

/* Kontrast granic – subtelne różnice między motywami */
body.theme-dark .item,
body.theme-dark .card-item {
  border-color: var(--border);
}

/* Wyrównanie barw wykresów (fallback bez biblioteki) */
:root {
  --chart-1: hsl(206 82% 46%);
  --chart-2: hsl(162 72% 38%);
  --chart-3: hsl(45 90% 55%);
  --chart-4: hsl(343 76% 54%);
  --chart-5: hsl(231 62% 50%);
  --chart-6: hsl(268 55% 55%);
}

/* Widżet Android (jeżeli będzie renderowany w webview) — neutralne tło */
.widget-surface {
  --bg: var(--surface-1);
  --text: inherit;
  --border: color-mix(in oklab, var(--border), transparent 30%);
}

/* Ujednolicenie ringów focus dla WCAG */
:root { --ring: 0 0 0 3px color-mix(in oklab, var(--focus) 32%, transparent); }